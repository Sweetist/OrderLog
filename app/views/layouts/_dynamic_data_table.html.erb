<div id="show-col" class="hidden"><h4>Hidden Tags</h4></div>
<table class="table table-bordered">
  <thead>
    <tr>
      <th></th>
      <% headers.each do |header| %>
      <% header.each do |key, val| %>

      <% if (val.name).in?(@visible) %>
      <th id="<%= val.name %>" class="hide-col">
        <% else %>
        <th id="<%= val.name %>" class="hide-col hidden-col">
          <% end %>

          <a>
            <%= val.name %>
          </a>
        </th> 
        <% end %>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% if data.any? %>
      <% data.each do |datum| %>
      <tr class="<%= datum.id %>">

        <td><a class="toggle-row">Show/Hide</a></td>

        <%= render 'layouts/data_row', datum: datum %> 

        <% if controller_name == "unified" %>

        <%= render 'layouts/data_row', datum: datum.order || @null_order %>
        <%= render 'layouts/data_row', datum: datum.bakery || @null_bakery %>
        <%= render 'layouts/data_row', datum: datum.recipient || @null_recipient %>

        <% end %>
        <td unless @transitions.empty?>
          
          <% @transitions.each do |transition| %>

          <%= link_to transition, {controller: controller_name, action: 'transition', id: datum.id, transition: transition}, method: :post %>
          <br>
          <% end %>
        </td>

        <td><%= link_to "edit", {controller: controller_name, action: 'edit', id: datum.id }, method: :get %></td>
        <td><%= link_to "delete", datum, method: :delete %></td>
      </tr>
      <% end %>
      <% end %>
    </tbody>
  </table>